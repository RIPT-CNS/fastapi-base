# FASTAPI_BASE

## Source Library

Đây là phiên bản Backend base từ framework FastAPI. Trong code base này đã cấu hình sẵn

- FastAPI
- Postgresql(>=14)
- Alembic
- API Login
- API CRUD User, API Get Me & API Update Me
- Pagination
- Authen/Authorize với JWT
- Permission_required & Login_required
- Logging
- Pytest

## Cấu trúc project

```txt
.
├── alembic
│   ├── versions    // thư mục chứa file migrations
│   └── env.py
├── app
│   ├── api         // các file api được đặt trong này
│   ├── core        // chứa file config load các biến env & function tạo/verify JWT access-token
│   ├── db          // file cấu hình make DB session
│   ├── utils       // các function hỗ trợ như login_manager, paging
│   ├── models      // Database model, tích hợp với alembic để auto generate migration
│   ├── schemas     // Pydantic Schema
│   ├── services    // Chứa logic CRUD giao tiếp với DB
│   └── main.py     // cấu hình chính của toàn bộ project
├── .gitignore
├── alembic.ini
├── docker-compose.yml
├── Dockerfile
├── .env.example
├── logging.ini     // cấu hình logging
├── pytest.ini      // file setup cho pytest
├── README.md
└── requirements.txt    // file chứa các thư viện để cài đặt qua pip install
```

## Migration

Migration là một tính năng cho phép bạn thay đổi cả cấu trúc và dữ liệu trong database.

Thay vì thay đổi trực tiếp vào database thì project FastAPI này sử dụng alembic để thực hiện việc thay đổi các table

```python
# alembic/versions/initial.py

...
"""empty message

Revision ID: initial
Revises: 
Create Date: 2025-05-21 07:30:17.705859

"""
from typing import Sequence, Union

from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision: str = 'initial'
down_revision: Union[str, None] = None
branch_labels: Union[str, Sequence[str], None] = None
depends_on: Union[str, Sequence[str], None] = None


def upgrade() -> None:
    """Upgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    pass
    # ### end Alembic commands ###


def downgrade() -> None:
    """Downgrade schema."""
    # ### commands auto generated by Alembic - please adjust! ###
    pass
    # ### end Alembic commands ###

...
```
